<img class="logo-image" src="../../../../assets/images/logo_ne.png" alt="Logo Neuchâtel">

<mat-card class="contacts-container">
  <mat-card-header>
    <mat-card-title>Contacts</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="flex-row">
      <div *ngFor="let person of data.contact_persons" class="person-container">
        <span>{{person.contact_person.first_name}} {{person.contact_person.last_name}}</span>
        <span style="color:rgba(255,255,255,.7);">{{person.metadata_role}}</span>
        <div class="flex-row">
          <a [href]="'mailto:'+person.contact_person.email" mat-icon-button>
            <mat-icon>email</mat-icon>
          </a>
          <a [href]="'tel:'+person.contact_person.phone" mat-icon-button>
            <mat-icon>phone</mat-icon>
          </a>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<mat-card class="metadata-main-container">
  <mat-card-header>
    <div mat-card-avatar class="header-image" *ngIf="data.image_link.indexOf('http') > -1"
         [style.backgroundImage]="'url(' + data.image_link + ')'"></div>
    <mat-card-title>Métadonnée</mat-card-title>
    <mat-card-subtitle>{{data.name}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <img *ngIf="data.image_link.indexOf('http') > -1" [src]="data.image_link" [alt]="data.name" height="150">
    <p>{{data.description_short}}</p>
    <p class="long-description" [style]="showLongDescription ? 'max-height:80vh;' : 'max-height:0;'">
      {{data.description_long}}</p>
  </mat-card-content>
  <mat-card-actions>
    <button *ngIf="data.description_long" mat-button (click)="showLongDescription = !showLongDescription">
      <mat-icon *ngIf="showLongDescription">more_horiz</mat-icon>
      Voir {{showLongDescription ? 'moins' : 'plus'}}
      <mat-icon *ngIf="!showLongDescription">more_horiz</mat-icon>
    </button>
    <button mat-button *ngIf="data.legend_link.indexOf('http') > -1" (click)="openLegend(data.legend_link)">
      Afficher la légende
    </button>
    <a *ngIf="data.geocat_link.indexOf('http') > -1" [href]="data.geocat_link" target="_blank" mat-button>
      Ouvrir géocat
      <mat-icon>open_in_new</mat-icon>
    </a>
  </mat-card-actions>
</mat-card>
